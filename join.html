<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Join the Club | West Basketball Newcastle</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Outfit', 'ui-sans-serif', 'system-ui'] },
          colors: {
            primary: '#10b981',
            accent: '#06d6a0',
            dark: '#0a0a0a',
            darker: '#050505',
            light: '#f8fafc'
          },
          boxShadow: {
            soft: '0 18px 60px rgba(0,0,0,.55)',
            glow: '0 0 60px rgba(16,185,129,.22)'
          }
        }
      }
    };
  </script>

  <link rel="stylesheet" href="parallax-bg.css" />
  <style>
    :root { color-scheme: dark; }
    body { background: #0a0a0a; color: #f8fafc; overflow-x: hidden; }

    /* glass */
    .glass {
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      border: 1px solid rgba(255,255,255,.10);
    }

    .glow {
      box-shadow: 0 0 40px rgba(16,185,129, 0.3);
    }

    .gradient-text {
      background: linear-gradient(135deg, #10b981 0%, #06d6a0 55%, #34d399 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .nav-blur {
      background: rgba(10,10,10,.72);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }

    /* nicer focus */
    :focus-visible {
      outline: 3px solid rgba(16,185,129,.55);
      outline-offset: 3px;
      border-radius: 14px;
    }

    /* button styles (NO hover animations) */
    .btn-primary {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      box-shadow: 0 14px 40px rgba(16,185,129,.22);
      transition: box-shadow .2s ease, filter .2s ease;
    }
    .btn-primary:hover { filter: brightness(1.03); box-shadow: 0 18px 55px rgba(16,185,129,.28); }
    .btn-primary:active { filter: brightness(.98); }

    .btn-secondary {
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.16);
      transition: border-color .2s ease, background .2s ease;
    }
    .btn-secondary:hover { background: rgba(255,255,255,.10); border-color: rgba(16,185,129,.35); }
    .btn-secondary:active { background: rgba(255,255,255,.07); }

    /* reveal */
    .section-fade { opacity: 0; transform: translateY(28px); transition: opacity .7s ease, transform .7s ease; }
    .section-fade.visible { opacity: 1; transform: translateY(0); }

    .programs-showcase {
      display: grid;
      grid-template-columns: 1fr;
      gap: 24px;
    }

    .program-tile {
      position: relative;
      border-radius: 24px;
      display: grid;
      grid-template-columns: minmax(240px, 0.9fr) 1.6fr;
      overflow: hidden;
      background: rgba(7,10,14,0.85);
      color: #f8fafc;
      text-decoration: none;
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow:
        0 18px 40px rgba(0,0,0,0.35),
        inset 0 1px 0 rgba(255,255,255,0.04);
      transition: transform 0.35s ease, box-shadow 0.35s ease, border-color 0.35s ease;
    }

    .program-tile:hover {
      transform: translateY(-3px);
      border-color: rgba(16,185,129,0.22);
      box-shadow:
        0 20px 42px rgba(0,0,0,0.4),
        0 0 18px rgba(16,185,129,0.05);
    }

    .program-tile::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, rgba(16,185,129,0.12), transparent 42%);
      opacity: 0;
      transition: opacity 0.35s ease;
      pointer-events: none;
      z-index: 0;
    }

    .program-tile:hover::before {
      opacity: 1;
    }

    .program-tile:hover .program-tile__image {
      transform: scale(1.04);
    }

    .program-tile__media {
      position: relative;
      min-height: 220px;
      background: #0b0f14;
      overflow: hidden;
      z-index: 1;
    }

    .program-tile__image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      filter: saturate(1.05);
      transition: transform 0.6s ease;
    }

    .program-tile__media::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.55), transparent 60%);
      pointer-events: none;
    }

    .program-tile__tag {
      position: absolute;
      left: 18px;
      bottom: 18px;
      z-index: 1;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,0.45);
      border: 1px solid rgba(255,255,255,0.18);
      font-size: 11px;
      letter-spacing: 0.28em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.75);
      backdrop-filter: blur(6px);
    }

    .program-tile__body {
      padding: 20px 22px 24px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      position: relative;
      z-index: 1;
    }

    .program-tile__kicker {
      font-size: 12px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.55);
    }

    .program-tile__title {
      font-size: 24px;
      font-weight: 800;
      letter-spacing: -0.02em;
    }

    .program-tile__summary {
      color: rgba(255,255,255,0.72);
      line-height: 1.65;
    }

    .program-tile__steps {
      display: grid;
      gap: 8px;
      font-size: 14px;
      line-height: 1.6;
      color: rgba(255,255,255,0.72);
      padding-left: 18px;
    }

    .program-tile__steps li::marker {
      color: rgba(16,185,129,0.85);
    }

    .program-tile__cta {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.7);
      margin-top: auto;
    }

    .program-anchor {
      scroll-margin-top: 120px;
    }

    @media (max-width: 900px) {
      .program-tile {
        grid-template-columns: 1fr;
      }

      .program-tile__media {
        min-height: 240px;
      }
    }

    @media (max-width: 1100px) {
      .programs-showcase {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 720px) {
      .programs-showcase {
        grid-template-columns: 1fr;
      }
    }

    /* ambient blobs */
    .blob { filter: blur(60px); opacity: .65; }
    @media (prefers-reduced-motion: reduce) {
      .section-fade { transition: none; transform: none; opacity: 1; }
    }
  </style>
</head>

<body class="text-light min-h-screen">
  <!-- Parallax background -->
  <div aria-hidden="true" class="fixed inset-0 -z-50 overflow-hidden">
    <!-- Base gradient wash -->
    <div class="absolute inset-0"
      style="background:
        radial-gradient(1200px 760px at 50% 12%, rgba(22,163,74,.12), transparent 58%),
        radial-gradient(1000px 700px at 18% 82%, rgba(239,68,68,.10), transparent 58%),
        radial-gradient(860px 640px at 86% 70%, rgba(22,163,74,.09), transparent 58%),
        linear-gradient(to bottom, rgba(8,14,22,.55), rgba(5,7,10,1));">
    </div>

    <!-- Parallax scene -->
    <div class="absolute inset-0" style="transform-style:preserve-3d; perspective: 900px;">
      <!-- Far -->
      <div class="parallax-layer absolute inset-0 wave-field" data-depth="0.04" data-mode="float"></div>
      <div class="parallax-layer absolute inset-0 fog-bands" data-depth="0.06" data-mode="float"></div>

      <!-- Mid -->
      <div class="parallax-layer absolute inset-0 nebula nebula-a" data-depth="0.12" data-mode="drift"></div>
      <div class="parallax-layer absolute inset-0 nebula nebula-b" data-depth="0.18" data-mode="drift"></div>
      <div class="parallax-layer absolute inset-0 chroma" data-depth="0.14" data-mode="float"></div>

      <!-- Details -->
      <div class="parallax-layer absolute inset-0 court-lines" data-depth="0.09" data-mode="locked"></div>
      <div class="parallax-layer absolute inset-0 shafts" data-depth="0.20" data-mode="float"></div>
      <div class="parallax-layer absolute inset-0 dust" data-depth="0.30" data-mode="grain"></div>

      <!-- Bokeh smear layers -->
      <div class="parallax-layer absolute inset-0 bokeh-smear bokeh-a" data-depth="0.76" data-mode="smear"></div>
      <div class="parallax-layer absolute inset-0 bokeh-smear bokeh-b" data-depth="0.86" data-mode="smear"></div>

      <!-- Foreground shards -->
      <div class="parallax-layer absolute left-[12%] top-[18%] h-52 w-52 rotate-12 rounded-[34px] opacity-[.10]"
           data-depth="0.46" data-mode="tilt"
           style="background: linear-gradient(135deg, rgba(255,255,255,.16), transparent 62%);
                  border: 1px solid rgba(255,255,255,.10);">
      </div>

      <div class="parallax-layer absolute right-[14%] top-[32%] h-64 w-64 -rotate-12 rounded-[42px] opacity-[.085]"
           data-depth="0.54" data-mode="tilt"
           style="background: linear-gradient(135deg, rgba(22,163,74,.18), transparent 70%);
                  border: 1px solid rgba(255,255,255,.09);">
      </div>

      <div class="parallax-layer absolute right-[30%] top-[62%] h-40 w-40 rotate-6 rounded-[28px] opacity-[.065]"
           data-depth="0.60" data-mode="tilt"
           style="background: linear-gradient(135deg, rgba(239,68,68,.14), transparent 74%);
                  border: 1px solid rgba(255,255,255,.08);">
      </div>

      <!-- Spotlight sweep -->
      <div class="parallax-layer absolute -inset-x-28 top-[-48%] h-[190%] rotate-6 opacity-[.14]"
           data-depth="0.24" data-mode="float"
           style="background: radial-gradient(closest-side at 50% 45%, rgba(255,255,255,.10), transparent 62%);">
      </div>
    </div>

    <!-- Premium overlays (static) -->
    <div class="absolute inset-0 streaks"></div>
    <div class="absolute inset-0 grid-overlay"></div>
    <div class="absolute inset-0 subgrid"></div>
    <div class="absolute inset-0 noise"></div>
    <div class="absolute inset-0 vignette"></div>

    <div class="absolute inset-x-0 bottom-0 h-[36vh] bg-gradient-to-t from-black/85 via-black/22 to-transparent"></div>
  </div>

  <!-- KEEPING ID SAME -->
  <header class="fixed top-0 left-0 right-0 z-50 nav-blur border-b border-white/5" id="site-nav"></header>

  <main class="pt-24">
    <!-- HERO -->
    <section class="pt-16 pb-0 px-6 relative overflow-hidden">
      <div class="absolute -top-16 -left-16 w-[32rem] h-[32rem] bg-primary/14 rounded-full blob"></div>
      <div class="absolute -bottom-24 -right-20 w-[26rem] h-[26rem] bg-accent/12 rounded-full blob"></div>

      <div class="max-w-5xl mx-auto relative">
        <div class="section-fade w-full md:max-w-[50vw] mx-auto">
          <!-- KEEPING IDS SAME -->
          <span id="join-hero-tag" class="inline-flex items-center gap-2 text-primary uppercase tracking-[0.3em] text-xs sm:text-sm font-semibold">
            Join Us
          </span>

          <h1 class="text-5xl md:text-6xl font-extrabold mt-4 mb-5 leading-[1.05]">
            <span id="join-hero-title">Join the</span>
            <span id="join-hero-highlight" class="gradient-text">Club</span>
          </h1>

          <p id="join-hero-description" class="text-lg sm:text-xl text-white/70 max-w-2xl leading-relaxed">
            There are plenty of opportunities for juniors in Newcastle to get involved in basketball.
          </p>

          <!-- subtle divider (better structure, no extra IDs) -->
          <div class="mt-8 h-px w-full max-w-2xl bg-gradient-to-r from-white/5 via-white/15 to-white/5"></div>
        </div>
      </div>
    </section>

    <!-- FEATURE -->
    <section class="py-10 px-6">
      <div class="max-w-5xl mx-auto grid lg:grid-cols-2 gap-8 items-center section-fade" id="join-feature">
        <div id="join-feature-image" class="image-card card-hover rounded-3xl overflow-hidden bg-white/5 border border-white/10">
          <img src="images/U12-Knights.jpg" alt="West Basketball family" class="w-full h-[320px] sm:h-[360px] lg:h-[400px] object-cover" loading="eager" decoding="async" />
        </div>
        <div class="glass rounded-3xl p-7 sm:p-8 shadow-soft">
          <span id="join-quote-tag" class="text-primary uppercase tracking-[0.3em] text-xs sm:text-sm font-semibold block mb-4">
            Parent Story
          </span>
          <p id="join-quote-text" class="text-white/70 leading-relaxed text-lg italic">A big thank you for welcoming our family to West Basketball and well done on a great season! Moving from interstate was a big move for us, and we have felt so welcomed and are very glad we chose to join such an awesome club!</p>
          <p id="join-quote-attribution" class="text-white/50 text-sm mt-4">Club family</p>
        </div>
      </div>
    </section>

    <!-- STREAMS + SUPPORT -->
    <section class="py-14 px-6">
      <div class="max-w-5xl mx-auto space-y-10">
        <!-- KEEPING ID SAME -->
        <div id="join-streams" class="section-fade">
          <div class="programs-showcase">
            <article id="u8s" class="program-tile program-anchor">
              <div class="program-tile__media">
                <img class="program-tile__image" src="images/mini-hoops.jpg" alt="U8s mini hoops players" loading="eager" decoding="async" />
                <span class="program-tile__tag">U8s</span>
              </div>
              <div class="program-tile__body">
                <span class="program-tile__kicker">Program details</span>
                <h2 class="program-tile__title">U8s</h2>
                <p class="program-tile__summary">
                  This competition is for players turning 5, 6 or 7 during the calendar year. Run on a Saturday morning, players will participate in a 3v3 style of game, with help from on floor coaches and additional skills training throughout the season. The U8s competitions are run each term, and we can ensure friends are kept together on teams - or it is a great chance to make new friends! Keep an eye on our Facebook page and website for registration information towards the end of each term.<br>More information can be found under the Development tab on the Newcastle Basketball website.
                </p>
                <a class="program-tile__cta" href="https://www.newcastlebasketball.com.au/">
                  Development info
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                  </svg>
                </a>
              </div>
            </article>

            <article id="u10s" class="program-tile program-anchor">
              <div class="program-tile__media">
                <img class="program-tile__image" src="images/u10s.jpg" alt="U10s players" loading="eager" decoding="async" />
                <span class="program-tile__tag">U10s</span>
              </div>
              <div class="program-tile__body">
                <span class="program-tile__kicker">Program details</span>
                <h2 class="program-tile__title">U10s</h2>
                <p class="program-tile__summary">
                  For players turning 8 or 9 during the calendar year, the U10s competition is a great introduction to 5v5 basketball. Played on a Thursday afternoon, each team will have a designated coach and are invited to participate in two skills sessions (held on select Sundays) throughout the term. This competition is run in Term 4, then again in Term 1, followed by a longer winter season to align with the Junior Competition as an 18-week competition during Terms 2 and 3. Keep an eye on our Facebook page and website for registration information as it comes to hand, friend requests will be accommodated where possible.<br>More information can be found under the Development tab on the Newcastle Basketball website.
                </p>
                <a class="program-tile__cta" href="https://www.newcastlebasketball.com.au/">
                  Development info
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                  </svg>
                </a>
              </div>
            </article>

            <article id="winter-junior" class="program-tile program-anchor">
              <div class="program-tile__media">
                <img class="program-tile__image" src="images/U14-West-Raiders.jpg" alt="Winter junior competition players" loading="eager" decoding="async" />
                <span class="program-tile__tag">Winter</span>
              </div>
              <div class="program-tile__body">
                <span class="program-tile__kicker">Program details</span>
                <h2 class="program-tile__title">Winter Junior Competition</h2>
                <p class="program-tile__summary">
                  Catering for U12 through to U18 players, the Winter Competition is the premier competition facilitated by Newcastle Basketball and runs through Terms 2 and 3 each year. West Basketball coordinates teams across all age groups and divisions, allocates coaches, coordinates training and skill development, and strives to ensure each player is placed in a team that suits their ability and preferences (e.g. friend requests, level of division, etc).<br>More information will be shared once registrations for 2026 open.
                </p>
                <a class="program-tile__cta" href="about.html#contact">
                  Contact us
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                  </svg>
                </a>
              </div>
            </article>

            <article id="summer-junior" class="program-tile program-anchor">
              <div class="program-tile__media">
                <img class="program-tile__image" src="images/U12-Knights.jpg" alt="Summer junior competition players" loading="eager" decoding="async" />
                <span class="program-tile__tag">Summer</span>
              </div>
              <div class="program-tile__body">
                <span class="program-tile__kicker">Program details</span>
                <h2 class="program-tile__title">Summer Junior Competition</h2>
                <p class="program-tile__summary">
                  Catering for U11 through to U17 players, this competition is facilitated by Newcastle Basketball and the clubs are not involved in putting teams together for this competition.
                </p>
                <a class="program-tile__cta" href="https://www.newcastlebasketball.com.au/summer-junior-competition/">
                  Newcastle Basketball info
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                  </svg>
                </a>
              </div>
            </article>

            <article id="development-programs" class="program-tile program-anchor">
              <div class="program-tile__media">
                <img class="program-tile__image" src="images/prez.jpg" alt="Development programs" loading="eager" decoding="async" />
                <span class="program-tile__tag">Programs</span>
              </div>
              <div class="program-tile__body">
                <span class="program-tile__kicker">Program details</span>
                <h2 class="program-tile__title">Development Programs and Holiday Camps</h2>
                <p class="program-tile__summary">
                  Newcastle Basketball facilitate a range of development programs and holiday camps to cater for all levels of basketball. From Mini Hoops (ages 3-5) through to representative programs, visit their website to find out more.
                </p>
                <a class="program-tile__cta" href="https://www.newcastlebasketball.com.au/">
                  Newcastle Basketball programs
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                  </svg>
                </a>
              </div>
            </article>

            <article id="referee-pathways" class="program-tile program-anchor">
              <div class="program-tile__media">
                <img class="program-tile__image" src="images/awards.jpg" alt="Referee pathways" loading="eager" decoding="async" />
                <span class="program-tile__tag">Referees</span>
              </div>
              <div class="program-tile__body">
                <span class="program-tile__kicker">Program details</span>
                <h2 class="program-tile__title">Referee Pathways</h2>
                <p class="program-tile__summary">
                  Newcastle Basketball have a referee pathways program for juniors aged 12 years and over. A great way to increase your basketball knowledge, get involved in the sport and earn some money along the way.
                </p>
                <a class="program-tile__cta" href="https://www.newcastlebasketball.com.au/referees/">
                  Referee pathways
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                  </svg>
                </a>
              </div>
            </article>
          </div>
        </div>

        <div class="section-fade ">
          <div class="mt-20 glass glow rounded-3xl p-7 sm:p-8 relative overflow-hidden w-full max-w-[50rem] mx-auto">
            <div class="absolute top-0 right-0 w-64 h-64 bg-primary/20 rounded-full blur-3xl"></div>
            <div class="absolute bottom-0 left-0 w-48 h-48 bg-accent/20 rounded-full blur-3xl"></div>

            <div class="relative text-center space-y-5">
              <!-- KEEPING IDS SAME -->
              <span id="join-help-tag" class="text-primary uppercase tracking-[0.3em] text-xs sm:text-sm font-medium">
                Support
              </span>

              <h2 class="text-3xl md:text-4xl font-bold text-white">
                <span id="join-help-title">Need Help?</span>
              </h2>

              <p id="join-help-text" class="text-white/70 text-base sm:text-lg max-w-lg mx-auto">
                For any further queries, please don't hesitate to contact us.
              </p>

              <div class="flex flex-wrap justify-center gap-4 pt-1">
                <!-- KEEPING ID SAME -->
                <button
                  id="join-help-cta"
                  type="button"
                  data-contact-trigger="true"
                  class="btn-primary inline-flex items-center justify-center gap-2 rounded-full px-8 py-4 text-white font-semibold text-base sm:text-lg contact-modal-trigger"
                >
                  Contact us
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- KEEPING ID SAME -->
  <footer class="border-t border-white/10 bg-darker mt-16" id="site-footer"></footer>

  <script src="data.js"></script>
  <script src="common.js"></script>

  <script>
    function renderJoinContent() {
      if (!hasOverrides()) return;
      const joinPage = window.siteContent.pages?.join ?? {};
      const setText = (id, value) => {
        const el = document.getElementById(id);
        if (el) el.innerHTML = formatMultiline(value ?? "");
      };

      setText("join-hero-tag", joinPage.heroTag);
      setText("join-hero-title", joinPage.heroTitle);
      setText("join-hero-highlight", joinPage.heroHighlight);
      setText("join-hero-description", joinPage.heroDescription);
      setText("join-quote-tag", joinPage.quoteTag ?? "Parent Story");
      setText("join-quote-text", joinPage.quoteText);
      setText("join-quote-attribution", joinPage.quoteAttribution);

      const featureSection = document.getElementById("join-feature");
      const featureImage = document.getElementById("join-feature-image");
      if (featureImage) {
        const imageSrc = joinPage.featureImage || "";
        const imageAlt = joinPage.featureAlt || "Join West Basketball";
        featureImage.innerHTML = imageSrc
          ? `<img src="${escapeHtml(imageSrc)}" alt="${escapeHtml(imageAlt)}" class="w-full h-[320px] sm:h-[360px] lg:h-[400px] object-cover" loading="eager" decoding="async" />`
          : "";
      }
      if (featureSection) {
        const hasImage = !!joinPage.featureImage;
        const hasQuote = (joinPage.quoteText || "").trim();
        featureSection.classList.toggle("hidden", !(hasImage || hasQuote));
      }

      setText("join-help-tag", joinPage.helpTag);
      setText("join-help-title", joinPage.helpTitle);
      setText("join-help-text", joinPage.helpText);

      const helpCta = document.getElementById("join-help-cta");
      if (helpCta) {
        helpCta.innerHTML = `${escapeHtml(joinPage.helpCtaLabel ?? "Talk to us")}
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
          </svg>`;
        helpCta.setAttribute("data-contact-trigger", "true");
        helpCta.classList.add("contact-modal-trigger");
      }

      const helpContact = document.getElementById("join-help-contact");
      if (helpContact) {
        const helpHref = joinPage.helpCtaHref ?? "";
        helpContact.textContent = helpHref ? `Contact: ${helpHref}` : "";
        helpContact.classList.toggle("hidden", !helpHref);
      }

      const container = document.getElementById("join-streams");
      if (container) {
        const streams = joinPage.streams || [];
        if (!streams.length) {
          container.innerHTML = "";
          return;
        }

        const baseSignUpLabel = joinPage.signUpLabel || "Register";
        const baseSignUpHref = joinPage.signUpHref || "";
        const programImages = [
          "images/mini-hoops.jpg",
          "images/u10s.jpg",
          "images/U14-West-Raiders.jpg",
          "images/U12-Knights.jpg",
          "images/prez.jpg",
          "images/awards.jpg",
          "images/prezq.jpg",
        ];

        const preferredOrder = ["juniors", "u8u10"];
        const getStreamKey = (stream) => (stream.id || stream.title || "").toString().toLowerCase();

        const orderedStreams = streams
          .map((stream, index) => ({ stream, index }))
          .sort((a, b) => {
            const aKey = getStreamKey(a.stream);
            const bKey = getStreamKey(b.stream);
            const aRank = preferredOrder.indexOf(aKey);
            const bRank = preferredOrder.indexOf(bKey);
            const aScore = aRank === -1 ? preferredOrder.length : aRank;
            const bScore = bRank === -1 ? preferredOrder.length : bRank;
            if (aScore !== bScore) return aScore - bScore;
            return a.index - b.index;
          })
          .map((entry) => entry.stream);

        container.innerHTML = `
          <div class="programs-showcase">
            ${orderedStreams.map((stream, index) => {
              const steps = ((stream.steps && stream.steps.length)
                ? stream.steps
                : (stream.links || []).map((link) => link.label || link.href || "")).filter((s) => (s ?? "").toString().trim());

              const ctaLabel = stream.ctaLabel || baseSignUpLabel;
              const ctaHref = (stream.ctaHref || baseSignUpHref || "").trim();
              const hasCta = !!ctaHref;
              const imageSrc = (stream.image || stream.imageSrc || stream.photo || "").toString().trim() || programImages[index % programImages.length];
              const imageAlt = (stream.imageAlt || stream.badge || stream.title || "Program").toString();
              const badge = (stream.badge || stream.title || "Program").toString();
              const kicker = (stream.kicker || "Program details").toString();
              const title = (stream.title || badge || "Program").toString();
              const description = stream.description ? formatMultiline(stream.description) : "";
              const anchorId = (stream.id || "").toString().trim();
              const anchorAttr = anchorId ? `id="${escapeHtml(anchorId)}"` : "";

              return `
                <article ${anchorAttr} class="program-tile program-anchor">
                  <div class="program-tile__media">
                    <img class="program-tile__image" src="${escapeHtml(imageSrc)}" alt="${escapeHtml(imageAlt)}" loading="eager" decoding="async" />
                    <span class="program-tile__tag">${escapeHtml(badge)}</span>
                  </div>
                  <div class="program-tile__body">
                    <span class="program-tile__kicker">${escapeHtml(kicker)}</span>
                    <h2 class="program-tile__title">${escapeHtml(title)}</h2>
                    ${description ? `<p class="program-tile__summary">${description}</p>` : ""}
                    ${steps.length ? `
                      <ul class="program-tile__steps">
                        ${steps.map((step) => `<li>${formatMultiline(step || "")}</li>`).join("")}
                      </ul>
                    ` : ""}
                    ${hasCta ? `
                      <a class="program-tile__cta" href="${escapeHtml(ctaHref)}">
                        ${escapeHtml(ctaLabel)}
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                        </svg>
                      </a>
                    ` : ""}
                  </div>
                </article>
              `;
            }).join("")}
          </div>
        `;
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      renderNav('join');
      renderFooter();
      renderJoinContent();
      initContactModal();

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) entry.target.classList.add('visible');
        });
      }, { threshold: 0.12 });

      document.querySelectorAll('.section-fade').forEach(el => observer.observe(el));
    });

    window.addEventListener('sitecontent:updated', () => {
      renderNav('join');
      renderFooter();
      renderJoinContent();
      initContactModal();
    });
  </script>
</body>
</html>
